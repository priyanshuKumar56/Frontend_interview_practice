<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Drag And Drop</title>
  </head>
  <style>
    body {
      font-family: Arial, sans-serif;
    }
    .drag-drop {
      display: flex;
      justify-content: space-around;
      align-items: center;
      width: 600px;
      margin: 0 auto;
    }
    #drag-list,
    #drag-list2 {
      width: 200px;
      border: 2px dashed black;
      list-style-type: none;
      padding: 1.3rem;
    }
    .drag-item,
    .drag-item2 {
      padding: 10px;
      height: 20px;
      background-color: #f1f1f1;
      margin-bottom: 5px;
      cursor: grab;
    }
    .drag-item:hover {
      background-color: #ddd;
    }
    .dragging {
      border: 2px dashed #333;
    }
  </style>
  <body>
    <div class="drag-drop">
      <ul id="drag-list" class="drag-list-active">
        <li class="drag-item" draggable="true">üçï pizza</li>
        <li class="drag-item" draggable="true">üçî burgur</li>
        <li class="drag-item" draggable="true">üßÄ chesse</li>
        <li class="drag-item" draggable="true">üçó chicken</li>
        <li class="drag-item" draggable="true">üçú noodle</li>
        <li class="drag-item" draggable="true">üçø popcorn</li>
      </ul>
      <ul id="drag-list2" class="drag-list2-active">
        <li class="drag-item2" draggable="true">borkaly</li>
        <li class="drag-item2" draggable="true">cavliflower</li>
        <li class="drag-item2" draggable="true">mint</li>
        <li class="drag-item2" draggable="true">lemons</li>
        <li class="drag-item2" draggable="true">ladyfinger</li>
        <li class="drag-item2" draggable="true">ginger</li>
      </ul>
    </div>
  </body>
  <script>
    const list1 = document.getElementById("drag-list");
    const list2 = document.getElementById("drag-list2");
    const parent = list1.parentElement;
    const parentNode = list1.parentNode;
    console.log(parent, parentNode);

    let draggedItem = null;

    function setupListDragDrop(list) {
      list.addEventListener("dragstart", (e) => {
        if (e.target.tagName === "LI") {
          draggedItem = e.target;
          setTimeout(() => {
            e.target.classList.add("dragging");
          }, 0);
        }
      });

      list.addEventListener("dragend", (e) => {
        if (e.target.tagName === "LI") {
          e.target.classList.remove("dragging");
          draggedItem = null;
        }
      });

      list.addEventListener("dragover", (e) => {
        e.preventDefault();

        const afterElement = getDragAfterElement(list, e.clientY);
        // console.log(afterElement);
        if (!draggedItem) return;
        if (afterElement == null) {
          list.appendChild(draggedItem);
        } else {
          list.insertBefore(draggedItem, afterElement);
        }
      });

      list.addEventListener("drop", (e) => {
        e.preventDefault();
        if (draggedItem && e.target !== draggedItem) {
          list.appendChild(draggedItem);
        }
      });
    }

    function getDragAfterElement(container, y) {
      const items = [...container.querySelectorAll("li:not(.dragging)")];
      console.log(items);
      return items.reduce(
        (closest, child) => {
          const box = child.getBoundingClientRect();
          const offset = y - box.top - box.height / 2;
          console.log(offset, child);
          if (offset < 0 && offset > closest.offset) {
            return { offset, element: child };
          } else {
            return closest;
          }
        },
        { offset: Number.NEGATIVE_INFINITY }
      ).element;
    }

    // Apply to both lists
    setupListDragDrop(list1);
    setupListDragDrop(list2);
  </script>
</html>
